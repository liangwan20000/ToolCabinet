<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <script type="text/javascript">
  /*
    高阶函数：接收函数形式参数或者返回值是函数的函数就是高阶函数
  */

  // function foo (callback) {
  //   let data = '123456'
  //   callback(data)
  // }

  // foo(function() {
  //   console.log('nihao')
  // })

  // let fn = function(d) {
  //   console.log('hello' + d)
  // }
  // foo(fn)

  // ----------------------------------
  let $ = jQuery = function () {}
  
  // 函数定义
  $.ajax = function (options) {
    // console.log(options.type)
    // let success = options.success
    // success()
    // let data = {
    //   uname: 'lisi',
    //   age: 12
    // }
    let xhr = new XMLHttpRequest()
    xhr.open(options.type, options.url)
    xhr.send(null)
    xhr.onreadystatechange = function () {
      if(xhr.readyState === 4 && xhr.status === 200) {
        // 获取正常的服务器数据
        let ret = xhr.responseText
        options.success(ret)
      }
    }
  }
  
  // 函数调用
  $.ajax({
    type: 'get',
    url: 'http://localhost:3000/data',
    success: function(data) {
      console.log(data)
    }
  })
  </script>
</body>
</html>
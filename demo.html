<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- <link rel="stylesheet" href="css/视口.css"> -->
    <link rel="stylesheet" href="css/demo.css">
    <link rel="stylesheet" href="css/common-公共样式.css">
    <!-- <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
    <title>Document</title>
    <style type="text/css">
        .aa {
            background-color: lime;
        }
        .bb {
            background-color: red;
        }
    </style>
</head>
<body>
    <div id="ddd"></div>
    <!-- <button id="btn">btn按钮</button> -->
    <ul id="ul">
        <li>red</li>
        <li>lime</li>
    </ul>
    <div id="app">
        <div :id="'aa'" class="boxDiv" @click="clickHandle">
            <div>{{ value }}</div>
        </div>
        <div class="hideBox" ref="hideBox">
            <div class="box" :style="{ transform: 'scale(' + num + ')', left: leftNum + 'px', top: topNum + 'px' }">
                <div class="bgcColor"></div>
                <img src="./key point html/123.jpg" alt="">
            </div>
        </div>
        <label><input type="radio" name="sex" value="男生">男生</label>
        <label><input type="radio" name="sex" value="女生">女生</label>
        <button class="btn" @click="clickHandle">提交</button>
    </div>
    <!-- 引入Vue -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- echarts -->
    <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
    <!-- 自己的方法 -->
    <script src="./js/hao.js"></script>
    <script src="./js/EventUtil.js"></script>
    <script src="./demo.js"></script>
    <script>
        let obj = new spa({
            originDom: '#ddd',
            data: {
                name: '李四',
                btn: '按钮'
            },
            template: {
                div: {
                    class: ['aa'],
                    id: 'btn',
                    'data-id': '22',
                    innerText: '你好',
                    template: {
                        div: {
                            class: ['bb'],
                            innerText: '早上好'
                        }
                    }
                }
            },
            // 标签绑定事件，初始化时执行
            domBindingHandle: {
                '#btn': {
                    eventType: 'onclick',
                    handle: function () {
                        alert('i am ' + this.data.btn);
                        this.template.div.class = ['bb']
                    }
                }
            },
            // 监听标签绑定事件，初始化时执行
            monitorHandle: {
                '#ul': {
                    eventType: 'click',
                    handle: function (event) {
                        let tar = event.target;
                        if (tar.nodeName === 'LI') {
                            tar.style.backgroundColor = tar.innerText;
                            tar.innerText = this.data.name;
                            this.data.btn = '张三'
                        }
                    }
                }
            }
        });
        let a = queryE('#btn')
        console.dir(a)
    </script>   
    <script type="text/javascript">
        let vm = new Vue({
            el: '#app',
            components: {},
            data: {
                num: 1,
                leftNum: 0,
                topNum: 0
            },
            computed: {
                value: {
                    get () {
                        return this.num
                    },
                    set (newValue) {
                        console.log(newValue)
                    }
                }
            },
            mounted() {
                this.$refs.hideBox.addEventListener('mousewheel', (event) => {
                    event.preventDefault();
                    // 放大的倍数是宽高乘的倍数
                    // 宽除以2得到的值就是一次移动的距离
                    console.log(event.offsetY, event.offsetX, 'arfgadfasdfsd')
                    if (event.wheelDelta > 0) {
                        this.num++
                        this.leftNum = ((this.num - 1) * 50) - (event.offsetX * (this.num - 1))
                        this.topNum = ((this.num - 1) * 50) - (event.offsetY * (this.num - 1))
                    } else {
                        this.num--
                        this.leftNum = ((this.num - 1) * 50) - (event.offsetX * (this.num - 1))
                        this.topNum = ((this.num - 1) * 50) - (event.offsetY * (this.num - 1))
                    }
                    
                    // var wheel = event.wheelDelta;
                    // var delta = Math.max(-1, Math.min(1, wheel) );
                    
                }, false);
                // this.$refs.box.addEventListener('mousewheel', (event) => {
                //     event.preventDefault();
                //     console.log(event, event.offsetX, 'arfgadfasdfsd')
                //     if (event.wheelDelta > 0) {
                //         this.num++
                //     } else {
                //         this.num--
                //     }
                    
                //     // var wheel = event.wheelDelta;
                //     // var delta = Math.max(-1, Math.min(1, wheel) );
                    
                // }, false);
                // this.num = 10
                // let time = '2021-03-26T11:20:40.000+0800'
                // console.log(parseTime(time))

                // var book = {
                //     "title": "Professional JavaScript",
                //     "authors": ["Nicholas C. Zakas", 'keyi'],
                //     edition: 3,
                //     year: 2011
                // };
                // let jsonText = this.getJson(book, (key, value) => {
                //     switch(key){
                //         case "authors":
                //             return value.join(",");
                //             break;
                //         case "year":
                //             return 5000;
                //             break;
                //         case "edition":
                //             return 6;
                //             break;
                //         default:
                //             return value;
                //             break;
                //     }
                // }, function () {
                //     this.title = '10'
                //     return this
                // });
                // console.log(jsonText)

                // let xiaohong = {
                //     name: "小红",
                //     age: 15
                // };
                // console.log(xiaohong.hasOwnProperty("name"))
                // xiaohong = new Proxy(xiaohong, {
                //     get(target, key) {
                //         let result = target[key];
                //         //如果是获取 年龄 属性，则添加 岁字
                //         if (key === "age") result += "岁";
                //         return result;
                //     },
                //     set(target, key, value) {
                //         if (key === "age" && typeof value !== "number") {
                //             throw Error("age字段必须为Number类型");
                //         }
                //         console.log(target, key, value)
                //         return Reflect.set(target, key, value);
                //     }
                // });
                // console.log(`我叫${xiaohong.name}  我今年${xiaohong.age}了`);
                // xiaohong.age = 20;
                // console.log(`我叫${xiaohong.name}  我今年${xiaohong.age}了`);

                // function extend(sup, base) {
                //     // 获取base的构造函数
                //     var descriptor = Object.getOwnPropertyDescriptor(
                //         base.prototype, "constructor"
                //     );
                //     console.log(descriptor)
                //     base.prototype = Object.create(sup.prototype);
                //     var handler = {
                //         construct: function(target, args) {
                //             var obj = Object.create(base.prototype);
                //             this.apply(target, obj, args);
                //             return obj;
                //         },
                //         apply: function(target, that, args) {
                //             sup.apply(that, args);
                //             base.apply(that, args);
                //         }
                //     };
                //     var proxy = new Proxy(base, handler);
                //     descriptor.value = proxy;
                //     Object.defineProperty(base.prototype, "constructor", descriptor);
                //     return proxy;
                // }
                // // 构造函数
                // var Person = function (name) {
                //   this.name = name
                // };
                // // 两个构造函数
                // var Boy = extend(Person, function (name, age) {
                //   this.age = age;
                // });

                // Boy.prototype.sex = "M";

                // var Peter = new Boy("Peter", 13);
                // console.log(Peter.sex);  // "M"
                // console.log(Peter.name); // "Peter"
                // console.log(Peter.age);  // 13
            },
            methods: {
                clickHandle(event) {
                    this.num++
                    // event.target.classList.add('loading');
                    // setTimeout(() => {
                    //     event.target.classList.remove('loading');
                    // }, 10000);
                },
                // 提交接口数据时使用
                getJson(data, fn, tostring = false) {
                    if (tostring) {
                        data.toJSON = tostring
                    }
                    return JSON.parse(JSON.stringify(data, fn), function (key, value) {
                        if (key === 'edition') {
                            return value * 2
                        } else {
                            return value
                        }
                    });
                },
                getQueryString(name) {
                    var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if(r != null) {
                        return  unescape(r[2]);
                    } else {
                        return null
                    }
                }
            }
        })
    </script>
</body>
</html>